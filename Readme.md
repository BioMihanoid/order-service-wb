# Order Service WB

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Kafka –∏ PostgreSQL. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–∏—ë–º –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ Kafka, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ REST-–¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º.

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Go 1.24
- Kafka (franz-go)
- PostgreSQL (sqlx)
- Goose (–º–∏–≥—Ä–∞—Ü–∏–∏)
- Docker / Docker Compose
- Gin (REST API)
- go-playground/validator (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
- golangci-lint (–ª–∏–Ω—Ç–∏–Ω–≥)

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä–∏—ë–º –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ Kafka
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤, –¥–æ—Å—Ç–∞–≤–æ–∫, –æ–ø–ª–∞—Ç, —Ç–æ–≤–∞—Ä–æ–≤ –≤ PostgreSQL
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –≤ –ø–∞–º—è—Ç–∏
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ API: –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –ø–æ `order_uid`

## üèë –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker
```bash
docker compose up -d
```

## ‚öñÔ∏è –ú–∏–≥—Ä–∞—Ü–∏–∏
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
make goose-install
make migrate-up
```

## ‚ö°Ô∏è Makefile-–∫–æ–º–∞–Ω–¥—ã

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ goose
make goose-install

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
make migrate-up

# –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
make migrate-down

# –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π
make migrate-status

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
make migrate-create name=create_orders_table

# –§–æ—Ä—Å–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é
make migrate-force version=1

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make run

# –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–æ–≤ –≤ Kafka
make generator

# –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞
make lint

# –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
make test


# –ó–∞–ø—É—Å–∫ docker-compose
make docker-up

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ docker-compose
make docker-down
```

## üöÄ –ó–∞–ø—É—Å–∫ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é
```bash
go run ./cmd/app
```

## üîé –ü—Ä–∏–º–µ—Ä API-–∑–∞–ø—Ä–æ—Å–∞
```bash
curl http://localhost:8081/order/b563feb7b2b84b6test
```